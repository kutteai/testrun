!function(){var e={98938:function(e){class t{constructor(){this.isConnected=!1,this.selectedAddress=null,this.chainId=null,this.listeners=new Map,this.pendingRequests=new Map,this.provider=this.createProvider(),this.injectProvider(),this.setupMessageListener()}createProvider(){return{isPayCioWallet:!0,version:"1.0.0",networkVersion:"1",autoRefreshOnNetworkChange:!1,selectedAddress:void 0,isConnected:!1,chainId:void 0,request:async e=>this.handleRequest(e),send:(e,t)=>{this.handleSend(e,t)},sendAsync:(e,t)=>{this.handleSend(e,t)},enable:async()=>await this.handleRequest({method:"eth_requestAccounts"}),on:(e,t)=>{this.addEventListener(e,t)},removeListener:(e,t)=>{this.removeEventListener(e,t)}}}async handleRequest(e){try{const t=await this.sendMessageToExtension({type:"WALLET_REQUEST",method:e.method,params:e.params||[]});if(t.error)throw new Error(t.error);return t.result}catch(e){throw e}}handleSend(e,t){this.handleRequest(e).then(s=>{t&&t(null,{id:e.id,jsonrpc:"2.0",result:s})}).catch(s=>{t&&t(s,{id:e.id,jsonrpc:"2.0",error:{message:s.message}})})}sendMessageToExtension(e){return new Promise((t,s)=>{const n=Date.now()+Math.random();this.pendingRequests.set(n,{resolve:t,reject:s}),window.postMessage({source:"paycio-wallet-injected",id:n,...e},"*"),setTimeout(()=>{this.pendingRequests.has(n)&&(this.pendingRequests.delete(n),s(new Error("Request timeout")))},3e4)})}setupMessageListener(){window.addEventListener("message",e=>{if(e.source!==window||"paycio-wallet-content"!==e.data.source)return;const{id:t,result:s,error:n}=e.data;if(this.pendingRequests.has(t)){const{resolve:e,reject:i}=this.pendingRequests.get(t);this.pendingRequests.delete(t),n?i(new Error(n)):e(s)}"WALLET_STATE_UPDATE"===e.data.type&&this.updateWalletState(e.data.state)})}updateWalletState(e){e.selectedAddress!==this.selectedAddress&&(this.selectedAddress=e.selectedAddress,this.provider.selectedAddress=e.selectedAddress,this.emit("accountsChanged",[e.selectedAddress])),e.chainId!==this.chainId&&(this.chainId=e.chainId,this.provider.chainId=e.chainId,this.emit("chainChanged",e.chainId)),e.isConnected!==this.isConnected&&(this.isConnected=e.isConnected,this.provider.isConnected=e.isConnected,this.emit("connect",{chainId:e.chainId}))}addEventListener(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}removeEventListener(e,t){const s=this.listeners.get(e);s&&s.delete(t)}emit(e,t){const s=this.listeners.get(e);s&&s.forEach(e=>{try{e(t)}catch(e){}})}injectProvider(){window.ethereum||Object.defineProperty(window,"ethereum",{value:this.provider,writable:!1,configurable:!1}),void 0!==window.web3&&(window.web3.currentProvider=this.provider),window.dispatchEvent(new CustomEvent("paycio-wallet-ready",{detail:{provider:this.provider}}))}}new t,e.exports&&(e.exports=t)}},t={};(function s(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports})(98938)}();